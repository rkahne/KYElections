{
    "contents" : "# KY Election Result Analysis\n# Robert Kahne\n\nlibrary(choroplethr)\n\n#KYFIPS<-subset(read.csv('./FIPS.csv',header=FALSE),V1=='KY')\nKYFIPS<-read.csv('./KYFIPS.csv',sep=';')\n#KYFIPS$County<-sapply(KYFIPS$V4,function(i){\n#  strsplit(as.character(i),split=' ')[[1]][1]\n#})\n#KYFIPS$FIP<-paste(KYFIPS$V2,KYFIPS$V3,sep='')\n#rownames(KYFIPS)<-1:length(KYFIPS$County)\n\nkyelections<-read.csv('./kyelections.csv',sep=';')\nkytotalvotes<-subset(kyelections,select=c(County,TotalVotes2015,TotalVotes2011,TotalVotes2007,TotalVotes2003,TotalVotes1999,TotalVotes1995,TotalVotes1991,TotalVotes1987,\n                                          TotalVotes1983,TotalVotes1979,TotalVotes1975))\nkydempercent<-subset(kyelections,select=c(County,PercentDem2015,PercentDem2011,PercentDem2007,PercentDem2003,PercentDem1999,PercentDem1995,PercentDem1991,PercentDem1987,\n                                          PercentDem1983,PercentDem1979,PercentDem1975))\nYear<-2019-(4*1:length(colnames(kytotalvotes)))\n\n#Jefferson County Data Frame\nJeffCoPercent<-vector(length=length(colnames(kytotalvotes))-1)\nfor(i in 1:length(JeffCoPercent)){\n  JeffCoPercent[i]<-as.numeric(kytotalvotes[56,][i+1]/sum(kytotalvotes[,i+1]))\n}\nJeffCoMargin<-as.numeric(kydempercent[56,][-1])\nJeffCoVotes<-as.numeric(kytotalvotes[56,][-1])\nJeffCoProportion<-JeffCoMargin*JeffCoPercent\nJeffCoFrame<-data.frame(Year[1:length(Year)-1],JeffCoPercent,JeffCoMargin,JeffCoVotes,JeffCoProportion)\n\n#Fayette County Data Frame\nFayetteCoPercent<-vector(length=length(colnames(kytotalvotes))-1)\nfor(i in 1:length(FayetteCoPercent)){\n  FayetteCoPercent[i]<-as.numeric(kytotalvotes[34,][i+1]/sum(kytotalvotes[,i+1]))\n}\nFayetteCoMargin<-as.numeric(kydempercent[34,][-1])\nFayetteCoVotes<-as.numeric(kytotalvotes[34,][-1])\nFayetteCoProportion<-FayetteCoMargin*FayetteCoPercent\nFayetteCoFrame<-data.frame(Year[1:length(Year)-1],FayetteCoPercent,FayetteCoMargin,FayetteCoVotes,FayetteCoProportion)\n\n#County Lists\nCounties2015<-sapply(which(kydempercent$PercentDem2015>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nCounties2011<-sapply(which(kydempercent$PercentDem2011>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nCounties2007<-sapply(which(kydempercent$PercentDem2007>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nCounties2003<-sapply(which(kydempercent$PercentDem2003>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nCounties1999<-sapply(which(kydempercent$PercentDem1999>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nCounties1995<-sapply(which(kydempercent$PercentDem1995>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nCounties1991<-sapply(which(kydempercent$PercentDem1991>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nCounties1987<-sapply(which(kydempercent$PercentDem1987>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nCounties1983<-sapply(which(kydempercent$PercentDem1983>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nCounties1979<-sapply(which(kydempercent$PercentDem1979>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nCounties1975<-sapply(which(kydempercent$PercentDem1975>0.5),function(i){\n  return<-as.character(kydempercent$County[i])\n})\nAllDemCounties<-data.frame(unique(c(Counties2011,Counties2007,Counties2003,Counties1999,Counties1995,Counties1991,Counties1987,Counties1983,Counties1979,Counties1975)))\ncolnames(AllDemCounties)<-'County'\nAllDemCounties$ky2011<-sapply(AllDemCounties$County,function(i){\n  return<-i %in% Counties2011\n})\nAllDemCounties$ky2007<-sapply(AllDemCounties$County,function(i){\n  return<-i %in% Counties2007\n})\nAllDemCounties$ky2003<-sapply(AllDemCounties$County,function(i){\n  return<-i %in% Counties2003\n})\nAllDemCounties$ky1999<-sapply(AllDemCounties$County,function(i){\n  return<-i %in% Counties1999\n})\nAllDemCounties$ky2011<-sapply(AllDemCounties$County,function(i){\n  return<-i %in% Counties1995\n})\nAllDemCounties$ky1991<-sapply(AllDemCounties$County,function(i){\n  return<-i %in% Counties1991\n})\nAllDemCounties$ky1987<-sapply(AllDemCounties$County,function(i){\n  return<-i %in% Counties1987\n})\nAllDemCounties$ky1983<-sapply(AllDemCounties$County,function(i){\n  return<-i %in% Counties1983\n})\nAllDemCounties$ky1979<-sapply(AllDemCounties$County,function(i){\n  return<-i %in% Counties1979\n})\nAllDemCounties$ky1975<-sapply(AllDemCounties$County,function(i){\n  return<-i %in% Counties1975\n})\n\nAlwaysDemCounties<-vector(length=0)\nfor(i in 1:length(AllDemCounties$County)){\n  if(!(FALSE %in% AllDemCounties[-1][i,])){\n    AlwaysDemCounties<-c(AlwaysDemCounties,as.character(AllDemCounties$County[i]))\n  }\n}\nLost2015Counties<-data.frame(AlwaysDemCounties,AlwaysDemCounties %in% Counties2015)\nLost2015Counties$region<-sapply(Lost2015Counties$AlwaysDemCounties,function(i){\n  return<-as.numeric(KYFIPS$FIP[which(KYFIPS$County==as.character(i))])\n})\ncolnames(Lost2015Counties)<-c('region','value')\n\nLost2015Counties$value<-as.numeric(Lost2015Counties$value)\ncolnames(Lost2015Counties)<-c('County','value','region')\n\ncounty_choropleth(Lost2015Counties,state_zoom='kentucky')\n",
    "created" : 1446780361423.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1435058877",
    "id" : "99E95AAF",
    "lastKnownWriteTime" : 1446790109,
    "path" : "~/GitHub/KYElections/KYElectionAnalysis.R",
    "project_path" : "KYElectionAnalysis.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : true,
    "type" : "r_source"
}